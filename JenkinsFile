pipeline {
    agent { 
        docker { 
            image "python:3.8"
            args '--user 0:0'
        } 

    }
    stages {
        stage('Run schemachange') {
            steps {
                sh 'pip install schemachange --upgrade'
                sh 'schemachange -f migrations --connections-file-path /var/jenkins_home/workspace/snowflake-devops-demo/connections.toml --connection-name Connection_1 -c DEMO_DB.SCHEMACHANGE.CHANGE_HISTORY --create-change-history-table'
            }
        }
    }
}